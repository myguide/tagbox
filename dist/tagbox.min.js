var tagbox={target:null,tagIndex:0,tagCount:0,inputName:"tags",preset:[],strict:!1,inputDefaults:{id:"tagbox-content-area",width:"100%",height:"24px",cssFloat:"left",border:"thin solid #c9c9c9",padding:"4px",paddingTop:"10px",outline:"0px solid transparent",color:"#444444",fontFamily:"Helvetica"},outputDefaults:{id:"tagbox-content-output",position:"relative",width:"100%",cssFloat:"left",padding:"4px",border:"thin solid #c9c9c9",borderBottom:"none",display:"none"},tagDefaults:{display:"inline",height:"18px",cssFloat:"left",margin:"3px",padding:"4px",border:"thin solid #CBD8F2",borderRadius:"5px",background:"#DEE7F7",color:"#444444",fontFamily:"Helvetica",fontWeight:"lighter"},init:function(t){this.target=document.getElementById(t),null!==this.target&&(this.createOutputArea(),this.createInputArea())},createOutputArea:function(){var t=document.createElement("div");t.id=this.outputDefaults.id,t.style.position=this.outputDefaults.position,t.style.width=this.outputDefaults.width,t.style.cssFloat=this.outputDefaults.cssFloat,t.style.padding=this.outputDefaults.padding,t.style.border=this.outputDefaults.border,t.style.borderBottom=this.outputDefaults.borderBottom,t.style.display=this.outputDefaults.display,this.target.appendChild(t)},createInputArea:function(){var t=document.createElement("div");t.contentEditable=!0,t.id=this.inputDefaults.id,t.style.width=this.inputDefaults.width,t.style.height=this.inputDefaults.height,t.style.cssFloat=this.inputDefaults.cssFloat,t.style.border=this.inputDefaults.border,t.style.padding=this.inputDefaults.padding,t.style.paddingTop=this.inputDefaults.paddingTop,t.style.outline=this.inputDefaults.outline,t.style.color=this.inputDefaults.color,t.style.fontFamily=this.inputDefaults.fontFamily,t.addEventListener("keydown",function(t){tagbox.detectKeyPress(t)}),this.target.appendChild(t)},detectKeyPress:function(t){(9==t.which||13==t.which||188==t.which)&&(t.preventDefault(),this.appendTag())},appendTag:function(){var t=document.getElementById("tagbox-content-area"),e=t.textContent;if(this.validateTagContent(e)===!0){t.textContent="";var a=document.getElementById("tagbox-content-output");"none"==a.style.display&&(a.style.display="block");var i=document.createElement("div");i.id="tagbox-tag-"+this.tagIndex,i.style.display=this.tagDefaults.display,i.style.height=this.tagDefaults.height,i.style.cssFloat=this.tagDefaults.cssFloat,i.style.margin=this.tagDefaults.margin,i.style.padding=this.tagDefaults.padding,i.style.border=this.tagDefaults.border,i.style.borderRadius=this.tagDefaults.borderRadius,i.style.background=this.tagDefaults.background,i.style.color=this.tagDefaults.color,i.style.fontFamily=this.tagDefaults.fontFamily,i.style.fontWeight=this.tagDefaults.fontWeight,i.style.cursor="pointer",i.innerHTML=e.trim(),i.addEventListener("click",function(t){tagbox.removeTag(t)}),a.appendChild(i),this.createHiddenInput(e)}},validateTagContent:function(t){var e=t.trim();return""!==e?!0:!1},removeTag:function(t){t.target.parentNode&&t.target.parentNode.removeChild(t.target);var e=t.target.id.replace("tagbox-tag-",""),a=document.getElementById("tagbox-input-"+e);if(a.parentNode&&a.parentNode.removeChild(a),this.tagCount--,0===this.tagCount){var i=document.getElementById("tagbox-content-output");i.style.display="none"}},createHiddenInput:function(t){var e=document.createElement("input");e.type="hidden",e.name=this.inputName+"["+this.tagIndex+"]",e.id="tagbox-input-"+this.tagIndex,e.value=t,this.target.appendChild(e),this.tagIndex++,this.tagCount++}};