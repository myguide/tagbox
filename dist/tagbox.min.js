var tagbox={target:null,tagIndex:0,inputName:"tags",preset:[],strict:!1,inputDefaults:{id:"tagbox-content-area",width:"100%",height:"37px",cssFloat:"left",border:"thin solid #c9c9c9",padding:"4px",outline:"0px solid transparent",color:"#444444",fontFamily:"Helvetica"},outputDefaults:{id:"tagbox-content-output",position:"relative",width:"100%",cssFloat:"left",padding:"4px",border:"thin solid #c9c9c9"},tagDefaults:{id:"tagbox-tag-"+this.tagIndex,display:"inline",height:"18px",cssFloat:"left",margin:"3px",padding:"4px",border:"thin solid #CBD8F2",borderRadius:"5px",background:"#DEE7F7",color:"#666666",fontFamily:"Helvetica"},init:function(t){this.target=document.getElementById(t),null!==this.target&&(this.createOutputArea(),this.createInputArea())},createOutputArea:function(){var t=document.createElement("div");t.id=this.outputDefaults.id,t.style.position=this.outputDefaults.position,t.style.width=this.outputDefaults.width,t.style.cssFloat=this.outputDefaults.cssFloat,t.style.border=this.outputDefaults.border,t.style.padding=this.outputDefaults.padding,t.style.display="none",this.target.appendChild(t)},createInputArea:function(){var t=document.createElement("div");t.contentEditable=!0,t.id=this.inputDefaults.id,t.style.width=this.inputDefaults.width,t.style.height=this.inputDefaults.height,t.style.cssFloat=this.inputDefaults.cssFloat,t.style.border=this.inputDefaults.border,t.style.padding=this.inputDefaults.padding,t.style.outline=this.inputDefaults.outline,t.style.color=this.inputDefaults.color,t.style.fontFamily=this.inputDefaults.fontFamily,t.addEventListener("keydown",function(t){tagbox.detectKeyPress(t)}),this.target.appendChild(t)},detectKeyPress:function(t){(9==t.which||13==t.which||188==t.which)&&(t.preventDefault(),this.appendTag())},appendTag:function(){var t=document.getElementById("tagbox-content-area"),e=t.textContent;if(this.validateTagContent(e)===!0){t.textContent="";var i=document.getElementById("tagbox-content-output");"none"==i.style.display&&(i.style.display="block");var a=document.createElement("div");a.id=this.tagDefaults.id,a.style.display=this.tagDefaults.display,a.style.height=this.tagDefaults.height,a.style.cssFloat=this.tagDefaults.cssFloat,a.style.margin=this.tagDefaults.margin,a.style.padding=this.tagDefaults.padding,a.style.border=this.tagDefaults.border,a.style.borderRadius=this.tagDefaults.borderRadius,a.style.background=this.tagDefaults.background,a.style.color=this.tagDefaults.color,a.style.fontFamily=this.tagDefaults.fontFamily,a.innerHTML=e.trim(),i.appendChild(a),this.createHiddenInput(e)}},validateTagContent:function(t){var e=t.trim();return""!==e?!0:!1},createHiddenInput:function(t){var e=document.createElement("input");e.type="hidden",e.name=this.inputName+"["+this.tagIndex+"]",e.value=t,this.target.appendChild(e),this.tagIndex++}};