var tagbox={target:null,tagIndex:0,tagCount:0,inputName:"tags",preset:[],strict:!1,inputElement:null,outputElement:null,tagElement:null,inputDefaults:{width:"100%",height:"24px",cssFloat:"left",border:"thin solid #c9c9c9",padding:"4px",paddingTop:"10px",outline:"0px solid transparent",color:"#444444",fontFamily:"Helvetica"},outputDefaults:{width:"100%",cssFloat:"left",padding:"4px",border:"thin solid #c9c9c9",borderBottom:"none",display:"none"},tagDefaults:{height:"18px",cssFloat:"left",margin:"3px",padding:"4px",border:"thin solid #CBD8F2",borderRadius:"5px",background:"#DEE7F7",color:"#444444",fontFamily:"Helvetica",fontWeight:"lighter",cursor:"pointer"},init:function(t){this.target=document.getElementById(t),null!==this.target&&(this.createOutputArea(),this.createInputArea())},applyStylesFromObject:function(t,e){for(var n in e)t.style[n]=e[n]},createOutputArea:function(){var t=document.createElement("div");t.id="tagbox-content-output",this.applyStylesFromObject(t,this.outputDefaults),this.outputElement=t,this.target.appendChild(this.outputElement)},createInputArea:function(){var t=document.createElement("div");t.id="tagbox-content-area",t.contentEditable=!0,t.addEventListener("keydown",function(t){tagbox.detectKeyPress(t)}),this.applyStylesFromObject(t,this.inputDefaults),this.inputElement=t,this.target.appendChild(this.inputElement)},detectKeyPress:function(t){(9==t.which||13==t.which||188==t.which)&&(t.preventDefault(),this.appendTag())},appendTag:function(){var t=this.inputElement.textContent;if(this.validateTagContent(t)===!0){this.inputElement.textContent="","none"==this.outputElement.style.display&&(this.outputElement.style.display="block");var e=document.createElement("div");e.id="tagbox-tag-"+this.tagIndex,e.innerHTML=t.trim(),e.addEventListener("click",function(t){tagbox.removeTag(t)}),this.applyStylesFromObject(e,this.tagDefaults),this.tagElement=e,this.outputElement.appendChild(this.tagElement),this.createHiddenInput(t)}},validateTagContent:function(t){var e=t.trim();return""!==e?!0:!1},removeTag:function(t){t.target.parentNode&&t.target.parentNode.removeChild(t.target);var e=t.target.id.replace("tagbox-tag-",""),n=document.getElementById("tagbox-input-"+e);if(n.parentNode&&n.parentNode.removeChild(n),this.tagCount--,0===this.tagCount){var a=document.getElementById("tagbox-content-output");a.style.display="none"}},createHiddenInput:function(t){var e=document.createElement("input");e.type="hidden",e.name=this.inputName+"["+this.tagIndex+"]",e.id="tagbox-input-"+this.tagIndex,e.value=t,this.target.appendChild(e),this.tagIndex++,this.tagCount++}};